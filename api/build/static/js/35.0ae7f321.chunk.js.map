{"version":3,"sources":["pages/checkout/styles.js","pages/checkout/Checkout.js","themes/spaces.js","themes/mixins.js","hooks/useUserHook.js","components/layout/message/successAlert.js","state/actions/cart.js","state/actions/coupon.js","state/actions/order.js"],"names":["CheckoutScreen","styled","div","topSpace","SubHeading","h3","darkColor","List","ul","ListItem","li","lightColor","QuillSection","OrderSummary","CouponSection","InputControl","inputLabel","Checkout","history","useState","address","setAddress","addressSaved","setAddressSaved","coupon","setCoupon","dispatch","useDispatch","userInfo","useUserHook","useSelector","state","userCart","loading","error","removeError","deleteUserCart","addDeliveryAddress","addressLoading","addressError","deliveryAddress","couponApply","couponDiscountLoading","couponDiscountError","couponDiscountSuccess","success","priceAfterDiscount","isCouponApplied","isCashOnDelivery","cashOrderCreate","cashOrderLoading","cashOrderError","cashOrder","useEffect","getUserCart","token","errorAlert","ok","successAlert","handleCouponDiscount","createDiscount","type","IS_COUPON_APPLIED","payload","window","localStorage","removeItem","ADD_TO_CART","removeUserCart","setTimeout","push","className","gutter","xs","md","style","width","direction","theme","value","onChange","onClick","saveUserAddress","inputMode","placeholder","e","target","products","length","LoadingOutlined","spin","message","showIcon","wrap","map","p","product","title","color","count","price","_id","cartTotal","justify","disabled","createCashOnDeliveryOrder","headerHeight","boxPadding","marginTopBox","marginBottomBox","linkHover","primaryColor","headingStyle","primaryDarkColor","inputIcon","user","msgText","duration","content","fontSize","checkoutProceed","cart","authtoken","a","PROCEED_CHECKOUT_REQUEST","config","headers","axios","post","data","PROCEED_CHECKOUT_SUCCESS","PROCEED_CHECKOUT_FAIL","response","GET_USER_CART_REQUEST","get","GET_USER_CART_SUCCESS","GET_USER_CART_FAIL","DELETE_USER_CART_REQUEST","put","DELETE_USER_CART_SUCCESS","DELETE_USER_CART_FAIL","DELIVERY_ADDRESS_REQUEST","DELIVERY_ADDRESS_SUCCESS","DELIVERY_ADDRESS_FAIL","getCoupons","COUPON_LIST_REQUEST","COUPON_LIST_SUCCESS","COUPON_LIST_FAIL","createCoupon","COUPON_CREATE_REQUEST","COUPON_CREATE_SUCCESS","COUPON_CREATE_FAIL","deleteCoupon","couponId","COUPON_DELETE_REQUEST","delete","COUPON_DELETE_SUCCESS","COUPON_DELETE_FAIL","APPLY_COUPON_REQUEST","APPLY_COUPON_SUCCESS","APPLY_COUPON_FAIL","createOrder","stripeResponse","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_CREATE_FAIL","getUserOrders","USER_ORDERS_LIST_REQUEST","USER_ORDERS_LIST_SUCCESS","USER_ORDERS_LIST_FAIL","COD_ORDER_CREATE_REQUEST","COD_ORDER_CREATE_SUCCESS","COD_ORDER_CREATE_FAIL"],"mappings":"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","file":"static/js/35.0ae7f321.chunk.js","sourcesContent":["import styled from 'styled-components';\r\nimport { topSpace } from '../../themes/spaces';\r\nimport { darkColor, lightColor } from '../../themes/colors';\r\nimport { inputLabel } from '../../themes/mixins';\r\n\r\nexport const CheckoutScreen = styled.div`\r\n    padding: ${topSpace} 0;\r\n`;\r\n\r\nexport const SubHeading = styled.h3`\r\n    text-transform: uppercase;\r\n    color: ${darkColor};\r\n    font-weight: 900;\r\n    font-size: 1.5rem;\r\n`;\r\n\r\nexport const List = styled.ul`\r\n    padding: 0;\r\n`;\r\n\r\nexport const ListItem = styled.li`\r\n    list-style: none;\r\n    padding: 1rem;\r\n    color: ${darkColor};\r\n    background-color: ${lightColor};\r\n    border: 1px solid rgba(0 0 0 / 5%);\r\n    border-radius: .3rem;\r\n`;\r\n\r\nexport const QuillSection = styled.div`\r\n    box-shadow: 0 0 .5rem .5rem rgba(0 0 0 / 5%);\r\n    padding: 2.5rem 2rem;\r\n    border-radius: .3rem;\r\n`;\r\n\r\nexport const OrderSummary = styled(QuillSection)``;\r\n\r\nexport const CouponSection = styled(QuillSection)`\r\n    margin-top: 2rem;\r\n`;\r\n\r\nexport const InputControl = styled.div`\r\n    ${inputLabel};\r\n`;","import { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport { \r\n    getUserCart, \r\n    removeUserCart, \r\n    saveUserAddress \r\n} from '../../state/actions/cart';\r\nimport { createDiscount } from '../../state/actions/coupon';\r\nimport { createCashOnDeliveryOrder } from '../../state/actions/order';\r\nimport useUserHook from '../../hooks/useUserHook';\r\nimport errorAlert from '../../components/layout/message/errorAlert';\r\nimport successAlert from '../../components/layout/message/successAlert';\r\nimport { ADD_TO_CART } from '../../state/constants/cart';\r\n\r\n// * styles\r\nimport {\r\n    CheckoutScreen, \r\n    List, \r\n    ListItem, \r\n    SubHeading,\r\n    CouponSection,\r\n    InputControl,\r\n    QuillSection,\r\n    OrderSummary,\r\n} from './styles';\r\n\r\n// * @antd\r\nimport Row from 'antd/lib/row';\r\nimport Col from 'antd/lib/col';\r\nimport Button from 'antd/lib/button';\r\nimport Tag from 'antd/lib/tag';\r\nimport Space from 'antd/lib/space';\r\nimport Divider from 'antd/lib/divider';\r\nimport Alert from 'antd/lib/alert';\r\nimport Tooltip from 'antd/lib/tooltip'\r\nimport { LoadingOutlined } from '@ant-design/icons';\r\nimport { IS_COUPON_APPLIED } from '../../state/constants/coupon';\r\n\r\nconst Checkout = ({ history }) => {\r\n    const [address, setAddress] = useState('');\r\n    const [addressSaved, setAddressSaved] = useState(false);\r\n    const [coupon, setCoupon] = useState('');\r\n\r\n    const dispatch = useDispatch();\r\n    const { userInfo } = useUserHook();\r\n\r\n    // * user cart state\r\n    let { loading, error, userCart } = useSelector(state => state.userCart);\r\n    const { \r\n        error: removeError, \r\n    } = useSelector(state => state.deleteUserCart);\r\n\r\n    // * user address state\r\n    const { \r\n        loading: addressLoading,\r\n        error: addressError, \r\n        deliveryAddress,\r\n    } = useSelector(state => state.addDeliveryAddress);\r\n\r\n    // * coupon discount state\r\n    let { \r\n        loading: couponDiscountLoading,\r\n        error: couponDiscountError, \r\n        success: couponDiscountSuccess,\r\n        priceAfterDiscount,\r\n    } = useSelector(state => state.couponApply);\r\n\r\n    const isCouponApplied = useSelector(state => state.isCouponApplied);\r\n\r\n    // * COD state\r\n    const isCashOnDelivery = useSelector(state => state.isCashOnDelivery);\r\n\r\n    // * cash order state\r\n    const { \r\n        loading: cashOrderLoading,\r\n        error: cashOrderError, \r\n        cashOrder,\r\n    } = useSelector(state => state.cashOrderCreate);\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch(getUserCart(userInfo?.token));\r\n    }, [dispatch, userInfo]);\r\n\r\n    const handleEmptyCart = () => {\r\n        if (typeof window !== 'undefined') {\r\n            localStorage.removeItem('userCart');\r\n        }\r\n\r\n        dispatch({\r\n            type: ADD_TO_CART,\r\n            payload: [],\r\n        });\r\n\r\n        dispatch(removeUserCart(userInfo?.token));\r\n\r\n        userCart.products = [];\r\n        userCart.cartTotal = 0;\r\n        priceAfterDiscount = 0;\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (removeError) {\r\n            errorAlert(removeError, 3);\r\n        }\r\n    }, [dispatch, removeError]);\r\n\r\n    const saveAddressToDB = () => {\r\n        dispatch(saveUserAddress(address, userInfo?.token));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (addressError) {\r\n            errorAlert(addressError, 3);\r\n        }\r\n\r\n        if (deliveryAddress?.ok) {\r\n            setAddress('');\r\n            setAddressSaved(true);\r\n\r\n            successAlert('Your address has been posted!',3 );\r\n        }\r\n    }, [addressError, deliveryAddress]);\r\n\r\n    const handleCouponDiscount = () => {\r\n        dispatch(createDiscount(coupon, userInfo?.token));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (couponDiscountError) {\r\n            dispatch({\r\n                type: IS_COUPON_APPLIED,\r\n                payload: false,\r\n            });\r\n\r\n            errorAlert(couponDiscountError, 3);\r\n        }\r\n\r\n        if (couponDiscountSuccess) {\r\n            setCoupon('');\r\n\r\n            dispatch({\r\n                type: IS_COUPON_APPLIED,\r\n                payload: true,\r\n            });\r\n\r\n            successAlert('Congrats!, you have applied to this offer');\r\n        }\r\n    }, [dispatch, couponDiscountError, couponDiscountSuccess]);\r\n\r\n    const createCashOrder = () => {\r\n        dispatch(createCashOnDeliveryOrder(userInfo?.token, isCashOnDelivery, isCouponApplied));\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (cashOrderError) {\r\n            errorAlert(cashOrderError, 3);\r\n        }\r\n\r\n        if (cashOrder?.ok) {\r\n            if (typeof window !== 'undefined') {\r\n                localStorage.removeItem('userCart');\r\n            }\r\n    \r\n            dispatch({\r\n                type: ADD_TO_CART,\r\n                payload: [],\r\n            });\r\n\r\n            dispatch({\r\n                type: IS_COUPON_APPLIED,\r\n                payload: false,\r\n            });\r\n\r\n            dispatch({\r\n                type: 'IS_CASH_ON_DELIVERY',\r\n                payload: false,\r\n            });\r\n    \r\n            dispatch(removeUserCart(userInfo?.token));\r\n\r\n            setTimeout(() => {\r\n                history.push('/user/history');\r\n            }, 1000);\r\n        }\r\n    }, [dispatch, cashOrderError, cashOrder, userInfo, history]);\r\n\r\n    const couponSection = () => (\r\n        <CouponSection>\r\n            <SubHeading>Got a coupon?</SubHeading>\r\n            <Space direction='vertical'>\r\n                <InputControl>\r\n                    <input\r\n                        type='text'\r\n                        inputMode='text'\r\n                        placeholder='Enter your own coupon'\r\n                        value={coupon}\r\n                        onChange={e => setCoupon(e.target.value)} \r\n                    />\r\n                </InputControl>\r\n                <Button \r\n                    type='primary' \r\n                    onClick={handleCouponDiscount}\r\n                    loading={couponDiscountLoading}\r\n                >Apply</Button>\r\n            </Space>\r\n        </CouponSection>\r\n    )\r\n\r\n    return (\r\n        <div className='container'>\r\n            <CheckoutScreen>\r\n                <Row gutter={[20, 20]}>\r\n                    <Col xs={24} md={12}>\r\n                        <QuillSection>\r\n                            <SubHeading>Delivery Address</SubHeading>\r\n                            <Space \r\n                                style={{ width: '100%' }}\r\n                                direction='vertical'>\r\n                                    <ReactQuill \r\n                                        theme='snow' \r\n                                        value={address} \r\n                                        onChange={setAddress}\r\n                                    />\r\n                                    <Button \r\n                                        type='primary' \r\n                                        onClick={saveAddressToDB}\r\n                                        loading={addressLoading}\r\n                                    >Save</Button>\r\n                            </Space>\r\n                        </QuillSection>\r\n                        {couponSection()}\r\n                    </Col>\r\n                    <Col xs={24} md={12}>\r\n                        <OrderSummary>\r\n                            <SubHeading>Order Summary</SubHeading>\r\n                            {!userCart?.products.length ? (\r\n                                <Alert message='Cart has been Emptied' type='success' showIcon />\r\n                            ) : loading ? (\r\n                                    <LoadingOutlined spin />\r\n                                ) : error ? (\r\n                                    <Alert message={error} type='error' showIcon />\r\n                                ) : (\r\n                                    <List>\r\n                                        <Space \r\n                                            direction='vertical' \r\n                                            wrap \r\n                                            style={{ width: '100%' }}>\r\n                                            {userCart?.products.map(p => (\r\n                                                <ListItem key={p._id}>\r\n                                                    {p.product.title} ({p.color}) x {p.count} = <Tag color='geekblue'>{p.product.price * p.count}</Tag>\r\n                                                </ListItem>\r\n                                                \r\n                                            ))}\r\n                                            <Tag color='#059669'>Total: ${userCart?.cartTotal}</Tag>\r\n                                            {priceAfterDiscount > 0 && (\r\n                                                <Tag color='success'>Total after discount: ${priceAfterDiscount}</Tag>\r\n                                            )}\r\n                                        </Space>\r\n                                    </List>\r\n                                )\r\n                            }\r\n                            <Divider />\r\n                            <Row gutter={[10, 10]} justify='space-between'>\r\n                                <Col>\r\n                                    <Tooltip \r\n                                        color='#059669'\r\n                                        title={\r\n                                            (!addressSaved) ? 'Please enter your delivery address to continue!' : ''\r\n                                        }>\r\n                                        {isCashOnDelivery ? (\r\n                                            <Button \r\n                                                disabled={!addressSaved || !userCart?.products.length}\r\n                                                type='primary'\r\n                                                onClick={createCashOrder}\r\n                                                loading={cashOrderLoading}\r\n                                            >Place Order</Button>\r\n                                        ) : (\r\n                                             <Button \r\n                                                disabled={!addressSaved || !userCart?.products.length}\r\n                                                type='primary'\r\n                                                onClick={() => history.push('/payment')}\r\n                                            >Place Order</Button>\r\n                                        )}\r\n                                    </Tooltip>\r\n                                </Col>\r\n                                <Col>\r\n                                    <Button \r\n                                        disabled={!userCart?.products.length}\r\n                                        type='secondary' \r\n                                        onClick={handleEmptyCart}\r\n                                    >Empty Cart</Button>\r\n                                </Col>\r\n                            </Row>\r\n                        </OrderSummary>\r\n                    </Col>\r\n                </Row>\r\n            </CheckoutScreen>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout;","// header\r\nexport const headerHeight = '6.5rem';\r\nexport const topSpace = '10rem';\r\nexport const boxPadding = '3.5rem';\r\nexport const marginTopBox = '2rem';\r\nexport const marginBottomBox = '2rem';\r\n// line heights\r\nexport const descLineHeight = '1.8';","import { \r\n    lightColor, \r\n    primaryColor, \r\n    primaryDarkColor \r\n} from './colors';\r\n\r\nexport const linkHover = () => {\r\n    return `\r\n        position: relative;\r\n        transition: transform .15s ease-in-out;\r\n        &::before {\r\n            content: '';\r\n            position: absolute;\r\n            z-index: -1;\r\n            top: 0;\r\n            right: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            transform: scale(0);\r\n            background-color: ${lightColor};\r\n            border-radius: 3px;\r\n            transition: transform .15s ease-in-out;\r\n            transform-origin: center;\r\n        }\r\n        &:hover {\r\n            color: ${primaryColor};\r\n        }\r\n        &:hover::before {\r\n            transform: scale(1);\r\n            transform-origin: top right;\r\n        }\r\n        &:active {\r\n            transform: scale(.9);\r\n        }\r\n    `;\r\n}\r\n\r\nexport const headingStyle = () => {\r\n    return `\r\n        background-image: linear-gradient(\r\n            to right, \r\n            ${primaryColor}, \r\n            ${primaryDarkColor}\r\n        );\r\n        -webkit-background-clip: text;\r\n        background-clip: text;\r\n        color: transparent;\r\n        font-weight: 900;\r\n    `\r\n}\r\n\r\nexport const inputIcon = () => {\r\n    return `\r\n        position: relative;\r\n        span {\r\n            position: absolute;\r\n            top: 50%;\r\n            transform: translate(0%, -50%);\r\n            color: ${primaryColor};\r\n        }\r\n        input {\r\n            padding-left: 3rem;\r\n            border: .2rem solid;\r\n            border-color: transparent transparent #ddd transparent;\r\n            outline: none;\r\n            width: 100%;\r\n            height: 5rem;\r\n            background-color: #fff;\r\n            border-radius: 0;\r\n        }\r\n        strong {\r\n            &:after {\r\n                content: '';\r\n                position: absolute;\r\n                bottom: 0;\r\n                left: 50%;\r\n                width: 0;\r\n                height: .2rem;\r\n                background-color: ${primaryColor};\r\n                transition: all .3s ease-in-out;\r\n            }\r\n        }\r\n        input:focus + strong {\r\n            &:after {\r\n                width: 100%;\r\n                left: 0;\r\n            }\r\n        }\r\n    `;\r\n}\r\n\r\nexport const inputLabel = () => {\r\n    return `\r\n        label {\r\n            display: block;\r\n            color: #000;\r\n            font-weight: 500;\r\n            margin-bottom: .2rem;\r\n        }\r\n        input {\r\n            width: 100%;\r\n            outline: none;\r\n            height: 4rem;\r\n            padding-left: 1rem;\r\n            border: .1rem solid rgba(0 0 0 / 10%);\r\n            &:focus {\r\n                box-shadow: 0 0 .1rem .1rem ${primaryDarkColor};\r\n                border: .1rem solid ${primaryColor};\r\n                transition: all .15s cubic-bezier(0.25, 0.46, 0.45, 0.94);\r\n            }\r\n        }\r\n    `;\r\n}","import { useSelector } from 'react-redux';\r\n\r\nconst useUserHook = () => {\r\n    const { user } = useSelector(state => ({ ...state }));\r\n    const { userInfo } = user;\r\n\r\n    return { userInfo }\r\n}\r\n\r\nexport default useUserHook;","import message from 'antd/lib/message';\r\n\r\nconst successAlert = (msgText, duration = 10) => message.success({\r\n    content: msgText, \r\n    style: {\r\n        fontSize: '1.35rem',\r\n        color: '#262626',\r\n    },\r\n    duration: duration,\r\n});\r\n\r\nexport default successAlert;","import axios from 'axios';\r\nimport { \r\n    DELETE_USER_CART_FAIL,\r\n    DELETE_USER_CART_REQUEST,\r\n    DELETE_USER_CART_SUCCESS,\r\n    DELIVERY_ADDRESS_FAIL,\r\n    DELIVERY_ADDRESS_REQUEST,\r\n    DELIVERY_ADDRESS_SUCCESS,\r\n    GET_USER_CART_FAIL,\r\n    GET_USER_CART_REQUEST,\r\n    GET_USER_CART_SUCCESS,\r\n    PROCEED_CHECKOUT_FAIL,\r\n    PROCEED_CHECKOUT_REQUEST, \r\n    PROCEED_CHECKOUT_SUCCESS,\r\n} from '../constants/cart';\r\n\r\nexport const checkoutProceed = (cart, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: PROCEED_CHECKOUT_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/user/cart', { cart }, config);\r\n    \r\n        dispatch({\r\n            type: PROCEED_CHECKOUT_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: PROCEED_CHECKOUT_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const getUserCart = authtoken => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: GET_USER_CART_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.get('/api/user/cart', config);\r\n    \r\n        dispatch({\r\n            type: GET_USER_CART_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: GET_USER_CART_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const removeUserCart = authtoken => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: DELETE_USER_CART_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        // * at least {} in put request\r\n        const { data } = await axios.put('/api/user/cart', {}, config);\r\n\r\n        dispatch({\r\n            type: DELETE_USER_CART_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: DELETE_USER_CART_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const saveUserAddress = (address, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: DELIVERY_ADDRESS_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/user/address', { address }, config);\r\n\r\n        dispatch({\r\n            type: DELIVERY_ADDRESS_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: DELIVERY_ADDRESS_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}","import axios from 'axios';\r\nimport { \r\n    APPLY_COUPON_FAIL,\r\n    APPLY_COUPON_REQUEST,\r\n    APPLY_COUPON_SUCCESS,\r\n    COUPON_CREATE_FAIL,\r\n    COUPON_CREATE_REQUEST,\r\n    COUPON_CREATE_SUCCESS,\r\n    COUPON_DELETE_FAIL,\r\n    COUPON_DELETE_REQUEST,\r\n    COUPON_DELETE_SUCCESS,\r\n    COUPON_LIST_FAIL,\r\n    COUPON_LIST_REQUEST, \r\n    COUPON_LIST_SUCCESS,\r\n} from '../constants/coupon';\r\n\r\nexport const getCoupons = () => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: COUPON_LIST_REQUEST,\r\n        });\r\n\r\n        const { data } = await axios.get('/api/coupons');\r\n\r\n        dispatch({\r\n            type: COUPON_LIST_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: COUPON_LIST_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const createCoupon = (coupon, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: COUPON_CREATE_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/coupon', coupon, config);\r\n    \r\n        dispatch({\r\n            type: COUPON_CREATE_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: COUPON_CREATE_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const deleteCoupon = (couponId, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: COUPON_DELETE_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.delete(`/api/coupon/${couponId}`, config);\r\n    \r\n        dispatch({\r\n            type: COUPON_DELETE_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: COUPON_DELETE_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const createDiscount = (coupon, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: APPLY_COUPON_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/user/apply-coupon', { coupon }, config);\r\n    \r\n        dispatch({\r\n            type: APPLY_COUPON_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: APPLY_COUPON_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}","import axios from 'axios';\r\nimport { \r\n    COD_ORDER_CREATE_FAIL,\r\n    COD_ORDER_CREATE_REQUEST,\r\n    COD_ORDER_CREATE_SUCCESS,\r\n    ORDER_CREATE_FAIL, \r\n    ORDER_CREATE_REQUEST, \r\n    ORDER_CREATE_SUCCESS, \r\n    USER_ORDERS_LIST_FAIL, \r\n    USER_ORDERS_LIST_REQUEST,\r\n    USER_ORDERS_LIST_SUCCESS\r\n} from '../constants/order';\r\n\r\nexport const createOrder = (stripeResponse, authtoken) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: ORDER_CREATE_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/user/order', { stripeResponse }, config);\r\n    \r\n        dispatch({\r\n            type: ORDER_CREATE_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: ORDER_CREATE_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const getUserOrders = authtoken => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: USER_ORDERS_LIST_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n\r\n        const { data } = await axios.get('/api/user/orders', config);\r\n\r\n        dispatch({\r\n            type: USER_ORDERS_LIST_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: USER_ORDERS_LIST_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}\r\n\r\nexport const createCashOnDeliveryOrder = (authtoken, isCashOnDelivery, isCouponApplied) => async dispatch => {\r\n    try {\r\n        dispatch({\r\n            type: COD_ORDER_CREATE_REQUEST,\r\n        });\r\n\r\n        const config = {\r\n            headers: {\r\n                authtoken,\r\n            }\r\n        }\r\n    \r\n        const { data } = await axios.post('/api/user/cash-order', { isCashOnDelivery, isCouponApplied }, config);\r\n    \r\n        dispatch({\r\n            type: COD_ORDER_CREATE_SUCCESS,\r\n            payload: data,\r\n        });\r\n    } catch (err) {\r\n        dispatch({\r\n            type: COD_ORDER_CREATE_FAIL,\r\n            payload: err.response?.data.message ? err.response.data.message : err.message,\r\n        });\r\n    }\r\n}"],"sourceRoot":""}